<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Lazy Loading</title>
	<link rel="stylesheet" href="bootstrap-3.3.4-dist/css/bootstrap.min.css">
</head>
<body>
	<div class="container">
		<h1>Instagram Pics</h1>
		<hr/>
		<div class="page">
		
			<ul></ul>

		
		</div>
	</div>
	
	
	<script src="jquery/jquery.js"></script>
	<script>
		var accessToken = '546e71022cee4faf84dc01167fe9d400';
		var image_jsonData;
		var image_jsonData_length;
		var window_h = $(window).height();
		var count = 1;
		var image_height;

		$(window).scroll(function (event) {
    		var scroll = $(window).scrollTop();
    		
    		
    		if(scroll > window_h + (count-1)*image_height - 450 && count < image_jsonData_length){
    			var id = "#image" + count;
    			$(id).attr('src', image_jsonData[count].images.standard_resolution.url);
    			count = count + 1;
    		}
    		
		});

		$.ajax({
		    url: 'https://api.instagram.com/v1/tags/nofilter/media/recent?',
		    dataType: 'jsonp',
		    type: 'GET',
		    data: {client_id: accessToken},
		    success: function(data){
		        
		        image_jsonData = data.data;
		        image_jsonData_length = image_jsonData.length;
		   
		        for (x in data.data){
		        	var id="image"+x
		       
		        	$('.page').append('<img class="lazy" id="'+id+'" width="640" height="640"> <br/>');
		        	
		        }
		        $('#image0').attr('src', image_jsonData[0].images.standard_resolution.url);
		        image_height = image_jsonData[0].images.standard_resolution.height;

		    },
		    error: function(data){
		        console.log(data);
		    }
		});


		



	</script>
	
</body>
</html>